@using Eleave.Models;
@{
    var dataEmp = (StoreGetProfile)ViewBag.ProfileList;
}

<style>
    .card {
        border-top-color: white;
    }
</style>
<div class="card">
    <div class="card-body">
        <div class="row">
            <div class="col-xs-6 col-sm-4">
                <div class="form-group">
                    <h5>รหัสพนักงาน</h5>
                    <div> @dataEmp.EmpId </div>
                </div>
            </div>
            <div class="col-xs-6 col-sm-4">
                <div class="form-group">
                    <h5>ชื่อ-สกุล</h5>
                    <div> @dataEmp.Fullname  </div>
                </div>
            </div>
            <div class="col-xs-6 col-sm-4">
                <div class="form-group">
                    <h5>บริษัท</h5>
                    <div> @dataEmp.Company </div>
                </div>
            </div>

            <div class="col-xs-6 col-sm-4">
                <div class="form-group">
                    <h5>หน่วยงาน</h5>
                    <div> @dataEmp.DeptName </div>
                </div>
            </div>
            <div class="col-xs-6 col-sm-4">
                <div class="form-group">
                    <h5>ตำแหน่ง</h5>
                    <div> @dataEmp.Position </div>
                </div>
            </div>
            <div class="col-xs-6 col-sm-4">
                <div class="form-group">
                    <h5>หัวหน้างาน</h5>
                    <div> @dataEmp.DirectorId </div>
                </div>
            </div>


        </div>
        <div class="row">
            <div class="col-xs-6 col-sm-4">
                <div class="form-group">
                    <h5>ระดับพนักงาน</h5>
                    <div> @dataEmp.EmpLvlName </div>
                </div>
            </div>
            <div class="col-xs-6 col-sm-4">
                <div class="form-group">
                    <h5>ประเภทพนักงาน</h5>
                    <div> @dataEmp.EmpTypeName </div>
                </div>
            </div>
            <div class="col-xs-6 col-sm-4">
                <div class="form-group">
                    <h5>รหัสกลุ่มอนุมัติ</h5>
                    <div> @dataEmp.ApprGrpID </div>
                </div>
            </div>
            <div class="col-xs-6 col-sm-4">
                <div class="form-group">
                    <h5>วันที่เริ่มงาน</h5>
                    <div> @dataEmp.StartDate.ToString("dd/MM/yyyy") </div>
                </div>
            </div>
            <div class="col-xs-6 col-sm-4">
                <div class="form-group">
                    <h5>อายุงาน</h5>
                    <div>
                        @{
                            DateTime startDate = dataEmp.StartDate;  // dataEmp.StartDate เป็น DateTime อยู่แล้ว
                            DateTime now = DateTime.Now;

                            // คำนวณจำนวนปี, เดือน, และวัน
                            int years = now.Year - startDate.Year;
                            int months = now.Month - startDate.Month;
                            int days = now.Day - startDate.Day;

                            // ถ้าเดือนติดลบ ให้ถอยปีออก 1
                            if (months < 0)
                            {
                                years--;
                                months += 12;
                            }

                            // ถ้าวันติดลบ ให้ถอยเดือนออก 1
                            if (days < 0)
                            {
                                months--;
                                // หาจำนวนวันในเดือนก่อนหน้าเพื่อนำมาบวก
                                var previousMonth = now.AddMonths(-1);
                                int daysInPreviousMonth = DateTime.DaysInMonth(previousMonth.Year, previousMonth.Month);
                                days += daysInPreviousMonth;
                            }

                            <span>@years ปี, @months เดือน, @days วัน</span>
                        }


                    </div>
                </div>
            </div>
            <div class="col-xs-6 col-sm-4">
                <div class="form-group">
                    <h5>สถานะพนักนักงาน</h5>
                    @if (dataEmp.EmpStatus == "Active")
                    {
                        <div class="text-white badge badge-success"><i class="fa fa-check-circle-o" aria-hidden="true"></i><span>Active</span></div>
                    }
                    else
                    {
                        <div class="text-white badge badge-danger"><i class="fa fa-times-circle-o" aria-hidden="true"></i><span>Inactive</span></div>
                    }
                    @*<div> @dataEmp.StartDate </div>*@
                </div>
            </div>
        </div>
    </div>
</div>